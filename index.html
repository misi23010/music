<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>영화 음악 퀴즈</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    .question {
      margin: 20px 0;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
    }
    .progress {
      margin-top: 20px;
      font-size: 18px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>영화 음악 퀴즈</h1>

  <!-- 진행 상황 -->
  <div class="progress" id="progress">
    진행 상황: <span id="currentQuestion">1</span>/<span id="totalQuestions">32</span> |
    정답률: <span id="accuracy">0%</span>
  </div>

  <!-- 퀴즈 -->
  <div class="question">
    <audio id="audio" controls>
      <source id="audioSource" src="" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <p>음악을 듣고 아래 질문에 답하세요:</p>
    <form id="quizForm">
      <label for="movie">영화 제목:</label><br>
      <input type="text" id="movie" name="movie"><br><br>

      <label for="composer">작곡가:</label><br>
      <input type="text" id="composer" name="composer"><br><br>

      <label for="music">음악 제목:</label><br>
      <input type="text" id="music" name="music"><br><br>

      <button type="button" onclick="checkAnswer()">제출</button>
    </form>
    <div class="result" id="result"></div>
  </div>

  <!-- 복습 모드 -->
  <button onclick="startReviewMode()">복습 모드 시작</button>

  <script>
    // 퀴즈 데이터베이스
    const quizData = [
      { movie: "2001 스페이스 오디세이", composer: "R.슈트라우스", music: "짜라투스라는 이렇게 말했다", audio: "media/1. 2001：스페이스 오디세이 (R. 슈트라우스：짜라투스트라는 이렇게 말했다).mp3" },
      { movie: "인생은 아름다워", composer: "오펜바흐", music: "호프만의 이야기 중 뱃노래", audio: "media/2. 인생은 아름다워 (오펜바흐 '호프만의 이야기' 중 뱃노래).mp3" },
      { movie: "불멸의 연인", composer: "베토벤", music: "교향곡 9번 합창", audio: "media/3. 불멸의 연인 (베토벤 교향곡 9번 합창).mp3" },
      { movie: "마이너리티 리포트", composer: "슈베르트", music: "교향곡 8번 미완성", audio: "media/4. 마이너리티 리포트 (슈베르트：교향곡 8번 '미완성').mp3" },
      { movie: "시네마천국", composer: "엔니오모리꼬네", music: "러브테마", audio: "media/5. 시네마 천국 (엔니오 모리꼬네 시네마 천국 중 러브테마).mp3" },
      { movie: "킹스스피치", composer: "모차르트", music: "피가로의 결혼 서곡", audio: "media/6. 킹스스피치 (모차르트 피가로의 결혼 서곡).mp3" },
      { movie: "쇼생크탈출", composer: "모차르트", music: "피가로의 결혼 중 포근한 산들 바람 이", audio: "media/7. 쇼생크 탈출 (모차르트 피가로의 결혼 중 포근한 산들 바람이).mp3" },
      { movie: "오션스 일레븐", composer: "드뷔시", music: "달빛", audio: "media/8. 오션스 일레븐 (드뷔시：달빛).mp3" },
      { movie: "피아니스트", composer: "쇼팽", music: "발라드1번", audio: "media/9. 피아니스트 (쇼팽 발라드 1번).mp3" },
      { movie: "황야의 무법자", composer: "엔니오모리꼬네", music: "황야의 무법자 테마", audio: "media/10. 황야의 무법자 (엔니오 모리꼬네 황야의 무법자 테마).mp3" },
      { movie: "킹스스피치, 불멸의 연인", composer: "베토벤", music: "교향곡 7번", audio: "media/11. 킹스스피치, 불멸의 연인 (베토벤 교향곡 7번 ).mp3" },
      { movie: "미션", composer: "엔니오모리꼬네", music: "가브리엘의 오보에", audio: "media/12. 미션 (엔니오 모리꼬네 가브리엘의 오보에).mp3" },
      { movie: "킹스스피치, 불멸의 연인", composer: "베토벤", music: "피아노협주곡5번 황제", audio: "media/13. 킹스스피치, 불멸의 연인 (베토벤 - 피아노 협주곡 제5번 황제).mp3" },
      { movie: "불멸의 연인", composer: "베토벤", music: "교향곡 5번 운명", audio: "media/14. 불멸의 연인 (베토벤 교향곡 5번 운명).mp3" },
      { movie: "불멸의 연인", composer: "베토벤", music: "교향곡 3번 영웅", audio: "media/15. 불멸의 연인 (베토벤 교향곡 제3번 영웅).mp3" },
      { movie: "샤인", composer: "리스트", music: "라캄파넬라", audio: "media/16. 샤인 (리스트 라캄파넬라).mp3" },
      { movie: "샤인", composer: "림스키코르샤코프", music: "왕벌의 비행", audio: "media/17. 샤인 (림스키코르샤코프 왕벌의 비행).mp3" },
      { movie: "킹스스피치", composer: "모차르트", music: "클라리넷 협주곡 A장조", audio: "media/18. 킹스스피치 (모차르트 클라리넷 협주곡 A장조 ).mp3" },
      { movie: "판타지아", composer: "바흐", music: "토카타와 푸가", audio:"media/19. 판타지아 (바흐 토카타와 푸가).mp3"},
      { movie: "파리넬리", composer: "헨델", music: "울게하소서", audio: "media/20. 파리넬리 (헨델 울게하소서).mp3" },
      { movie: "피아니스트", composer: "쇼팽", music: "녹턴 C#마이너", audio: "media/21. 피아니스트 (쇼팽 녹턴 C#마이너).mp3" },
      { movie: "ET", composer: "존윌리암스", music: "메인테마", audio: "media/22. ET (존윌리암스 메인테마).mp3" },
      { movie: "내 여자친구를 소개합니다.", composer: "사티", music: "짐노페디1번", audio: "media/23. 내 여자친구를 소개합니다. (사티 짐노페디1번).mp3" },
      { movie: "대부3", composer: "마스카니", music: "카발레리아루스티카나 간주곡", audio: "media/24. 대부3 (마스카니 카발레리아루스티카나 간주곡).mp3" },
      { movie: "로미오와 줄리엣", composer: "모차르트", music: "교향곡 25번", audio: "media/25. 로미오와 줄리엣 (모차르트 교향곡 25번).mp3" },
      { movie: "메리에겐 뭔가 특별한 것이 있다", composer: "모차르트", music: "아이네 클라이네 나흐트 뮤직", audio: "media/26. 메리에겐 뭔가 특별한 것이 있다 (모차르트 아이네 클라이네 나흐트 뮤직).mp3" },
      { movie: "뮤직 러버", composer: "차이코프스키", music: "피아노 협주곡 1번", audio: "media/27. 뮤직 러버 (차이코프스키 피아노 협주곡 1번).mp3" },
      { movie: "불멸의 연인", composer: "베토벤", music: "피아노소나타 월광", audio: "media/28. 불멸의 연인 (베토벤 피아노소나타 월광).mp3" },
      { movie: "빌리엘리어트", composer: "차이코프스키", music: "백조의 호수", audio: "media/29. 빌리엘리어트 (차이코프스키 백조의 호수).mp3" },
      { movie: "샤인", composer: "라흐마니노프", music: "피아노협주곡 3번", audio: "media/30. 샤인 (라흐마니노프 피아노협주곡 3번).mp3" },
      { movie: "스타워즈", composer: "존윌리암스", music: "메인테마", audio: "media/31. 스타워즈 (존윌리암스 메인테마).mp3" },
      { movie: "트루먼 쇼", composer: "모차르트", music: "터키행진곡", audio: "media/32. 트루먼 쇼 (모차르트 터키행진곡).mp3" }
    ];
    let currentQuestion = 0; // 현재 문제 번호
    let correctAnswers = 0; // 정답 횟수
    let incorrectAnswers = []; // 틀린 문제 저장
    const totalQuestions = quizData.length;

    document.getElementById("totalQuestions").innerText = totalQuestions;

    // 문제 로드
    function loadQuestion() {
        const audioSource = document.getElementById("audioSource");
        audioSource.src = quizData[currentQuestion].audio;
        document.getElementById("audio").load();
        document.getElementById("result").innerText = "";
        document.getElementById("quizForm").reset();
        updateProgress();
    }

    // 정답 확인
    function checkAnswer() {
        const movie = document.getElementById("movie").value.trim();
        const composer = document.getElementById("composer").value.trim();
        const music = document.getElementById("music").value.trim();

        const correctMovie = quizData[currentQuestion].movie;
        const correctComposer = quizData[currentQuestion].composer;
        const correctMusic = quizData[currentQuestion].music;

        if (movie === correctMovie && composer === correctComposer && music === correctMusic) {
            document.getElementById("result").innerText = `정답입니다!`;
            correctAnswers++;
        } else {
            document.getElementById("result").innerText = `오답입니다! 정답은 "${correctMovie}, ${correctComposer}, ${correctMusic}" 입니다.`;
            incorrectAnswers.push(quizData[currentQuestion]);
        }

        currentQuestion++;
        if (currentQuestion >= totalQuestions) {
            alert("퀴즈가 종료되었습니다!");
            currentQuestion = 0; // 다시 처음으로
        }
        
        loadQuestion();
    }

    // 진행 상황 업데이트
    function updateProgress() {
        document.getElementById("currentQuestion").innerText = currentQuestion + 1;
        const accuracy = Math.round((correctAnswers / (currentQuestion || 1)) * 100);
        document.getElementById("accuracy").innerText = `${accuracy}%`;
    }

    // 복습 모드 시작
    function startReviewMode() {
        if (incorrectAnswers.length === 0) {
            alert("복습할 문제가 없습니다!");
            return;
        }

        quizData.length = incorrectAnswers.length; // 기존 데이터 교체
        for (let i = 0; i < incorrectAnswers.length; i++) {
            quizData[i] = incorrectAnswers[i];
        }

        currentQuestion = 0; // 첫 번째 복습 문제로 이동
        correctAnswers = 0; // 점수 초기화
        incorrectAnswers = []; // 틀린 문제 초기화

        alert("복습 모드를 시작합니다!");
        loadQuestion();
    }

    // 첫 번째 문제 로드
    window.onload = loadQuestion;

  </script>
</body>
</html>
